<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Statistical Analysis</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body { background-color: #0a0a0a; color: #87CEEB; scroll-behavior: smooth; font-family: 'Inter', sans-serif;}
        .sidebar { background-color: #000000; width: 260px; height: 100vh; position: fixed; top: 0; left: 0; z-index: 100; border-right: 1px solid #222;}
        .sidebar a { color: #FFFFFF; text-decoration: none; padding: 12px 20px; border-radius: 8px; margin-bottom: 5px; display: block; transition: 0.3s; }
        .sidebar a:hover, .sidebar a.active { background-color: #87CEEB; color: #000000; font-weight: bold; }
        .main-content { margin-left: 260px; padding: 40px; }
        .figma-card { background: #121212; border-radius: 12px; border: 1px solid #222; padding: 24px; box-shadow: 0 4px 6px rgba(0,0,0,0.5); transition: transform 0.3s, box-shadow 0.3s; }
        .figma-card:hover { transform: translateY(-5px); box-shadow: 0 10px 15px rgba(0,0,0,0.8); border-color: #87CEEB; }
        h1, h2, h3, h4, h5, h6, strong, span, p, li { color: #87CEEB !important; }
        small { color: #FFFFFF; font-weight: 500; }
        @keyframes fadeUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        .anim-up { animation: fadeUp 0.6s ease-out forwards; opacity: 0; }
        .d-1 { animation-delay: 0.1s; } .d-2 { animation-delay: 0.2s; } .d-3 { animation-delay: 0.3s; }
        .list-group-item { background-color: transparent !important; border-color: #333 !important; }
    </style>
</head>
<body>
    <div class="sidebar p-4 d-flex flex-column">
        <h4 style="color:#87CEEB" class="mb-0">AI Tracker</h4><small class="mb-4">Retail Analytics</small>
        <a href="/dashboard">Dashboard</a>
        <a href="/zones">Zone Comparison</a>
        <a href="/statistics" class="active">Statistical Analysis</a>
        <a href="/export">Reports Export</a>
        <a href="/gdpr">GDPR Privacy Mode</a>
    </div>

    <div class="main-content">
        <div class="mb-4 anim-up"><h2>Statistical Analysis</h2><small>Advanced metrics and regression models</small></div>

        <h5 class="anim-up d-1 mt-4 mb-3">Routine Statistics (Seconds)</h5>
        <div class="row g-4 mb-4 anim-up d-1">
            <div class="col-md-3"><div class="figma-card"><small>Mean</small><h3 id="s-mean">...</h3></div></div>
            <div class="col-md-3"><div class="figma-card"><small>Median</small><h3 id="s-median">...</h3></div></div>
            <div class="col-md-3"><div class="figma-card"><small>Mode</small><h3 id="s-mode">...</h3></div></div>
            <div class="col-md-3"><div class="figma-card"><small>Std Deviation</small><h3 id="s-std">...</h3></div></div>
        </div>

        <div class="row g-4 mb-4 anim-up d-2">
            <div class="col-md-6">
                <div class="figma-card h-100">
                    <h5>Non-Routine Operations</h5>
                    <ul class="list-group list-group-flush mt-3">
                        <li class="list-group-item d-flex justify-content-between px-0"><span>10% Trimmed Mean</span> <strong id="s-trim">...</strong></li>
                        <li class="list-group-item d-flex justify-content-between px-0"><span>Weighted Mean (by AI Conf)</span> <strong id="s-weight">...</strong></li>
                        <li class="list-group-item d-flex justify-content-between px-0"><span>Interquartile Range (IQR)</span> <strong id="s-iqr">...</strong></li>
                    </ul>
                </div>
            </div>
            <div class="col-md-6">
                <div class="figma-card h-100 border-top border-4" style="border-top-color: #98FF98 !important;">
                    <h5 style="color:#98FF98 !important;">T-Test: Entrance vs Checkout</h5>
                    <ul class="list-group list-group-flush mt-3">
                        <li class="list-group-item d-flex justify-content-between px-0"><span>t-statistic:</span> <strong id="s-tstat">...</strong></li>
                        <li class="list-group-item d-flex justify-content-between px-0 border-0"><span>p-value:</span> <strong id="s-pval">...</strong></li>
                    </ul>
                    <div class="alert mt-2 py-2 small" style="background-color:rgba(152,255,152,0.1); color:#98FF98 !important; border:1px solid #98FF98;">Indicates significant behavioral difference.</div>
                </div>
            </div>
        </div>

        <div class="row g-4 anim-up d-3">
            <div class="col-md-6"><div class="figma-card"><h5>Linear Regression</h5><small>Model: y = mx + c</small><h4 class="mt-3" style="color:#98FF98 !important;" id="s-lin">...</h4></div></div>
            <div class="col-md-6"><div class="figma-card"><h5>Non-linear Power Regression</h5><small>Model: y = ax^b</small><h4 class="mt-3" style="color:#98FF98 !important;" id="s-pow">...</h4></div></div>
        </div>
    </div>

    <script>
        async function loadStats() {
            const res = await fetch('/api/unit10');
            const data = await res.json();
            if(data.status === "success") {
                document.getElementById('s-mean').innerText = data.routine.mean;
                document.getElementById('s-median').innerText = data.routine.median;
                document.getElementById('s-mode').innerText = data.routine.mode;
                document.getElementById('s-std').innerText = data.routine.std;
                document.getElementById('s-trim').innerText = data.non_routine.trimmed;
                document.getElementById('s-weight').innerText = data.non_routine.weighted;
                document.getElementById('s-iqr').innerText = data.non_routine.iqr;
                document.getElementById('s-tstat').innerText = data.ttest.t_stat;
                document.getElementById('s-pval').innerText = data.ttest.p_val;
                document.getElementById('s-lin').innerText = `y = ${data.regression.linear.slope}x + ${data.regression.linear.int}`;
                document.getElementById('s-pow').innerText = `y = ${data.regression.power.a}x^${data.regression.power.b}`;
            }
        }
        loadStats();
    </script>
</body>
</html>
